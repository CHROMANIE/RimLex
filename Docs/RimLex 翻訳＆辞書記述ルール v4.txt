# RimLex 翻訳＆辞書記述ルール v4

> 目的：`Dict/strings_ja.tsv` に**そのまま貼れる**翻訳辞書を作る。
> LLM（GPT 等）は**省略なし・厳密一致**で出力すること。

---

## 1) 出力フォーマット（絶対厳守）

* **タブ区切り 1 行 1 ペア**：`<英語原文><TAB><日本語訳>`
* **ヘッダ行は出さない**（「English Text\t日本語訳」など禁止）。
* **BOM なし UTF-8**／改行は `\n`。
* **コメントを入れる場合のみ**、行頭 `#` を付ける（RimLex が無視）。
* **英語側は原文を完全コピー**（一字一句・記号・大文字小文字・スペース含めて）。

  * ただし**先頭と末尾の余計な空白は削る**（`" text"` → `"text"`）。
  * **途中の空白・記号は絶対に変えない**（例：`": "` の空白、`" - "` の両側スペースなど）。

---

## 2) 置換・正規化のルール（英語側）

* **改行は `/n` を使う**（複数行は 1 行に連結し、改行位置を `/n` で表現）：
  例）`Line1/nLine2/nLine3`
* **数字は `#` に置換**（小数も 1 つの `#`）：
  例）`"Default: 80"` → `"Default: #"`
  例）`"Range 1 - 200"` → `"Range # - #"`
* **`#` の個数・並びは原文と一致**させる：`"# frequency: #"` → `"#の頻度：#"` など。
* **省略記号（`...` や `…`）は禁止**。**絶対に原文全文**を書く。
  ✗ `Note that this freque...`　→　○ `Note that this frequency is further adjusted by …`
* **引用符や記号は原文のまま**（`'` / `"` / `:` / `-` / `(` `)` などを変換しない）。
* **URL・MOD名・作者名・バージョン**は翻訳しない（英語側もそのまま）。

---

## 3) 日本語訳のルール

* 直訳禁止。**UI に自然な日本語**にする（文末は「。」）。
* コロン後は日本語なら「：」を使ってよい：`"Valid range: # - #"` → `“有効範囲：#～#”`。
* プレースホルダ `#` の**位置・個数は必ず一致**。
* MOD 名・固有名詞は**訳さない**（RimJobWorld など）。
* **暴力表現・性的表現**は**原文の語感を損なわず**、UI で読める自然さに調整（過度な意訳・婉曲は避ける）。

---

## 4) よくある落とし穴（必ず回避）

* **英語キーの先頭に空白を置かない**（一致しなくなる）。
* **`/n` の前後に空白を入れない**：`"text /n next"` は **×**。
* **`-` の両側スペースを消さない**：`"# - #"` は **そのまま**。
* **全角・半角の取り違え**禁止（`-` を全角長音にしない、英数は基本半角）。
* **同じ英語に別訳を付けない**（一貫性を保つ）。必要なら別キーに分ける。

---

## 5) 最低限入れておく共通フラグメント（行フォールバック用）

> これらは**どの MOD にも効く**汎用行。**必ず辞書に独立行で**入れる。

```
Valid range: # - #	有効範囲：#～#
Default: #	既定値：#
```

* これにより、**改行ありツールチップの最下段 2 行**は、全文が未訳でも**部分的に必ず日本語化**される。

---

## 6) 例（そのまま使えるサンプル）

**スライダー見出し**

```
Vaginal penetration frequency: #	膣性交の頻度：#
```

**改行ありツールチップ（全文）**

```
Frequency of anal fisting (vaginal not yet implemented). Requires one partner to have a working hand. Note that this frequency is further adjusted by factors such as whoring, rape, etc./n/nValid range: # - #/nDefault: #	アナルフィスティングの発生頻度（膣は未実装）。条件を満たす必要があります。頻度は他の要因（売春、強姦など）でも調整されます。/n/n有効範囲：#～#/n既定値：#
```

**数値のみの行（形状キー）**

```
# frequency: #	#の頻度：#
```

---

## 7) 受け入れチェック（LLM が**自動で自己検査**する項目）

* 各行が **`[^\t]+\t[^\t]+`** を満たす（タブ 1 個／複タブなし）。
* 英語列に **`…`** や **`...`** が **含まれていない**。
* 英語列の先頭・末尾に**空白なし**。
* `/n` の個数が原文の改行数と一致（行数 = `/n` 数 + 1）。
* `#` の個数が英語と日本語で同数。
* 1 行の長さが極端に短くない（**原文の全文**を持っている）。
* 出力に**説明文・コードブロック・バッククォート**など**余計な文字を混ぜない**。

---

## 8) LLM に渡す推奨プロンプト雛形

> 下のカギ括弧をそのままコピペして使えます。英語原文リスト（`/n` と `#` 形状済み）を差し込むだけ。

```
あなたは RimWorld 用ローカライズ辞書の作成者です。次の制約を厳守して、TSV（タブ区切り）で日本語訳を出力してください。

【厳守ルール】
- 1行1ペア、<英語原文><TAB><日本語訳>。ヘッダなし。BOMなしUTF-8。
- 英語原文は一字一句そのまま（先頭末尾の空白は削除）。途中の空白・記号は変えない。
- 改行は /n、数字は #。プレースホルダ # の個数・順序は両列で一致させる。
- 省略禁止（... や … を使わない）。原文は全文記述。
- 出力はTSV行のみ。解説・コードブロック・余談は一切出さない。

【訳し方】
- UIで自然な日本語に。文末は「。」。固有名詞・MOD名は訳さない。

【行フォールバック用の共通行（先頭に必ず出力）】
Valid range: # - #	有効範囲：#～#
Default: #	既定値：#

【翻訳対象（英語原文リスト）】
＜ここに Export から得た英語原文をそのまま貼る（/n と # を含む）＞

以上を満たすTSV行のみを出力せよ。
```

---

## 9) 運用メモ（チーム向け）

* まず**共通フラグメント 2 行**を辞書に常備 → 最低限の可読性を確保。
* その後、**ブロック本文の英語“全文”**で順次置き換え（`…` の行は削除）。
* 追加辞書を取り込むたびに、**重複キー（同英語→異訳）**の差分チェックを実施。
* 辞書は**改行 `/n` と数字 `#` を前提**に管理（収集・照合仕様と一致）。

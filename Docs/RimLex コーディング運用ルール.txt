# 🧩 RimLex コーディング運用ルール（v4 開発フェーズ共通）

## 1. 安定領域の保護

* 現在、**収集機能とオプションUIは安定している**。
  → この2領域（UI収集パイプライン、設定画面）は**大幅な変更を行わない**こと。
  → ただし、**必要なボタン追加・整理・軽微な改善**はOK（禁止ではない）。

---

## 2. コードの読み取りに関する制約

* 現在、**プロジェクトファイルを正しく読み込めない／省略される不具合が発生中**。
  → その場合は、**必ず報告して作業を中断**する。
  → 補完や推測による実装は**禁止**。
  → 読み取れない部分がある場合は、「どの `.cs` が必要か」を明示して、**完全なファイルの再提出**を依頼する。

---

## 3. 改修の基本原則

* **無断でコード全体を再構築しないこと。**
  → 既存の `.cs` を「加筆または修正」の形で更新する。
  → **関係のない箇所の書き換えは厳禁**（フォーマット変更や命名統一なども含む）。
  → クラス構成・ファイル構成・関数名を変更しない。

---

## 4. 書き換え許可の条件（例外ルール）

* 「加筆修正である必要がある」わけではない。
  → **冗長な迂回や無意味なラッパー化は禁止。**
  → 目的は「全体再構築によって既存の修正や積み重ねが失われることを防ぐ」こと。
  → よって、整理や構造改善など**プラスの理由**（可読性・整合性・安定性）での書き換えはOK。
  → 逆に「参照が通らないから再構築した」など**マイナス理由での再構築は禁止。**

---

## 5. 複数ファイルの出力ルール

* 原則：「**1回の応答で1つの `.cs`**」を出力。
  → これは**トークン制限による出力欠損を防ぐ**ための運用ルール。
  → ただし、**出力が完全で欠損の心配がない場合**や**複数ファイルが密接に関係している場合**は、
  複数 `.cs` を同時に提示しても良い。

---

## 6. 実装意図の共有

* 改修の目的を明確に伝えること。
  → 「バグ修正」「挙動の安定化」「構造整理」「v4フェーズ対応」など、目的を明記して出力。
  → 変更点は末尾に「**Key Methods Present**」または「**改修概要**」を必ず記載。

---

## 7. 最重要指針（中断と報告）

* **読めない・不完全・曖昧**な状態で作業を続けない。
  → 「読めないので仮に再構築した」は**再発防止対象**。
  → 必ず「どの部分が欠落している」「どのファイルが必要か」を報告して、えーいちに提出を依頼。

---

### ✅ まとめ（GPTが守るべき判断フロー）

| 状況           | 行動                        |
| ------------ | ------------------------- |
| ファイルが完全に読めた  | 既存コードに**加筆または修正**         |
| 一部読めない       | **作業中断 → 報告 → 再提出依頼**     |
| 構造が破綻している    | 原因を報告し、再構築の必要性を**明示的に提案** |
| 冗長・非効率な箇所    | 整理・短縮OK（機能・仕様を変えない）       |
| トークン不足が懸念される | ファイルを分割して出力               |
| 目的が明確        | 改修前に要約を提示して進行             |
